(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{2672:function(t,e,n){"use strict";n.r(e);n(361);var o=n(251),l={name:"BtSearch",data:function(){return{keyword:"",api:"",data:[],loading:!0,apiList:[],init:!1}},mounted:function(){this.getApi()},methods:{getApi:function(){var t=this;this.$axios.get("/bt").then((function(e){t.loading=!1,t.apiList=e.data.data})).catch((function(e){t.$notify.error({title:"获取接口失败",message:e})}))},search:function(){var t=this;return!this.loading&&(this.api?void(this.keyword?(this.loading=!0,this.data=[],this.$axios.post("/bt",{source:this.api.value,keyword:this.keyword}).then((function(e){t.init=!0,t.loading=!1,t.data=e.data.data})).catch((function(e){t.loading=!1,t.$notify.error({title:"搜索失败",message:e})}))):this.$notify.error({title:"搜索失败",message:"请输入关键词"})):this.$notify.warning({title:"搜索失败",message:"请选择接口"}))},doCopy:function(text){var t=this;this.$copyText(text).then((function(){t.$message.success("复制成功")}),(function(){t.$message.error("复制失败")}))},download:function(t){var e=this;if(this.loading)return!1;this.loading=!0,this.$axios.post("/bt/getUrl",{source:t.TrackerId,filename:t.Title,path:t.Path}).then((function(t){if(e.loading=!1,!t.data.data){var n=new Blob([new Uint8Array(t.data.buffer.data).buffer],{type:t.data.type}),l=URL.createObjectURL(n);return e.$alert('<a href="'.concat(l,'" download="').concat(t.data.filename,'">').concat(l,"</a>"),"下载地址",{confirmButtonText:"下载",dangerouslyUseHTMLString:!0,callback:function(){Object(o.a)(l,t.data.filename)}}),!1}e.$alert("<pre>".concat(t.data.data,"</pre>"),"下载地址",{confirmButtonText:"复制",dangerouslyUseHTMLString:!0,callback:function(){e.$copyText(t.data.data).then((function(){e.$message.success("复制成功")}),(function(){e.$message.error("复制失败，请手动选择复制")}))}})})).catch((function(t){e.loading=!1,e.$notify.error({title:"下载失败",message:t})}))}}},r=n(2),c=function(t){t.exports.head={meta:[{hid:"keywords",keywords:"磁力搜索,种子搜索,BT搜索,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"在线磁力种子搜索"}],title:"磁力搜索 - MikuTools"},t.options.toolsMeta={name:"磁力搜索",path:"/bt_search",head:{meta:[{hid:"keywords",keywords:"磁力搜索,种子搜索,BT搜索,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"在线磁力种子搜索"}],title:"磁力搜索 - MikuTools"},show:!1,hot:"vip",key:"vip"}},component=Object(r.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bt_search"},[n("nya-container",{attrs:{title:"磁力搜索"}},[n("div",{staticClass:"nya-subtitle"},[t._v("\n            关键词\n        ")]),n("el-input",{staticClass:"mb-15",attrs:{disabled:t.loading,placeholder:"lovelive",autofocus:"",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(1)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[n("el-button",{attrs:{slot:"append",loading:t.loading},on:{click:function(e){return t.search(1)}},slot:"append"},[t._v("\n                "+t._s(t.loading?"搜索中":"开始搜索")+"\n            ")])],1),n("div",{staticClass:"nya-subtitle"},[t._v("\n            选择磁力接口\n        ")]),n("el-select",{staticClass:"full-width mb-15",attrs:{placeholder:"请选择磁力接口"},model:{value:t.api,callback:function(e){t.api=e},expression:"api"}},t._l(t.apiList,(function(e){return n("el-option",{key:e.name,attrs:{value:e,label:e.name}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.desc))])])})),1),t.api?n("div",[n("div",{staticClass:"nya-subtitle"},[t._v("\n                接口信息\n            ")]),n("ul",{staticClass:"nya-list"},[n("li",[t._v("接口名称："+t._s(t.api.name))]),n("li",[t._v("网址："),n("a",{attrs:{href:t.api.url,target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(t.api.url))])]),n("li",[t._v("搜索范围："+t._s(t.api.desc))])])]):t._e()],1),t.data.length||t.init?n("nya-container",{attrs:{title:"搜索结果"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.data,border:""}},[n("el-table-column",{attrs:{prop:"Title",label:"文件名","min-width":"200"}}),n("el-table-column",{attrs:{prop:"PublishDate",label:"日期",width:"100"}}),n("el-table-column",{attrs:{prop:"Size",label:"文件大小",width:"100"}}),n("el-table-column",{attrs:{prop:"magnet",label:"链接",width:"100",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.MagnetUri?n("el-button",{staticClass:"mr-5",attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),t.doCopy(e.row.MagnetUri)}}},[t._v("\n                        复制\n                    ")]):t._e(),e.row.MagnetUri?n("el-link",{attrs:{type:"primary",href:e.row.MagnetUri}},[t._v("\n                        下载\n                    ")]):n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),t.download(e.row)}}},[t._v("\n                        下载\n                    ")])]}}],null,!1,2675297995)})],1)],1):t._e(),n("nya-container",{attrs:{title:"说明"}},[n("ul",{staticClass:"nya-list"},[n("li",[t._v("如果发现某个接口无法使用可尝试更换接口")]),n("li",[t._v("磁力搜索失效速度非常快，暂时无解，可通过【问题反馈】提交你认位不错的磁力站点")]),n("li",[n("b",[t._v("部分电影、游戏等资源最好使用英语或发行地语言进行搜索")])])])])],1)}),[],!1,null,null,null);"function"==typeof c&&c(component);e.default=component.exports}}]);