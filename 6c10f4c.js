(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{1095:function(t,e,n){t.exports={}},2181:function(t,e,n){"use strict";var r=n(2182),o=n(2183);n(8);var l=function(t,g,b){t/=255,g/=255,b/=255;var e,s,n=Math.max(t,g,b),r=Math.min(t,g,b),o=n,l=n-r;if(s=0==n?0:l/n,n==r)e=0;else{switch(n){case t:e=(g-b)/l+(g<b?6:0);break;case g:e=(b-t)/l+2;break;case b:e=(t-g)/l+4}e/=6}return[e,s,o]},c=function(t,s,e){var n,g,b,i=Math.floor(6*t),r=6*t-i,p=e*(1-s),q=e*(1-r*s),o=e*(1-(1-r)*s);switch(i%6){case 0:n=e,g=o,b=p;break;case 1:n=q,g=e,b=p;break;case 2:n=p,g=e,b=o;break;case 3:n=p,g=q,b=e;break;case 4:n=o,g=p,b=e;break;case 5:n=e,g=p,b=q}return[255*n,255*g,255*b]},h={grayscale:function(t){for(var e=t.data,i=0;i<e.length;i+=4){var n=.2126*e[i]+.7152*e[i+1]+.0722*e[i+2];e[i]=e[i+1]=e[i+2]=n}return t},sepia:function(t,e){for(var n=t.data,i=0;i<n.length;i+=4){var r=n[i],g=n[i+1],b=n[i+2];n[i]=r*(1-.607*e)+.769*g*e+.189*b*e,n[i+1]=.349*r*e+g*(1-.314*e)+.168*b*e,n[i+2]=.272*r*e+.534*g*e+b*(1-.869*e)}return t},invert:function(t){for(var e=t.data,i=0;i<e.length;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2];return t},brightness:function(t,e){var n=t.data;e=~~(255*(e=(e=e>1?1:e)<-1?-1:e));for(var i=0;i<n.length;i+=4)n[i]+=e,n[i+1]+=e,n[i+2]+=e;return t},hueSaturation:function(t,e){for(var n=t.data,i=0;i<n.length;i+=4){var r=l(n[i],n[i+1],n[i+2]);r[1]*=e;var o=c(r[0],r[1],r[2]);n[i]=o[0],n[i+1]=o[1],n[i+2]=o[2]}return t},saturation:function(t,e){var n=t.data;e=e<-1?-1:e;for(var i=0;i<n.length;i+=4){var r=.2989*n[i]+.587*n[i+1]+.114*n[i+2];n[i]=-r*e+n[i]*(1+e),n[i+1]=-r*e+n[i+1]*(1+e),n[i+2]=-r*e+n[i+2]*(1+e)}return t},contrast:function(t,e){e*=255;for(var n=t.data,r=259*(e+255)/(255*(259-e)),i=0;i<n.length;i+=4)n[i]=r*(n[i]-128)+128,n[i+1]=r*(n[i+1]-128)+128,n[i+2]=r*(n[i+2]-128)+128;return t},colorFilter:function(t,e){for(var n=t.data,r=e[3],i=0;i<n.length;i+=4)n[i]-=(n[i]-e[0])*r,n[i+1]-=(n[i+1]-e[1])*r,n[i+2]-=(n[i+2]-e[2])*r;return t},rgbAdjust:function(t,e){for(var n=t.data,i=0;i<n.length;i+=4)n[i]*=e[0],n[i+1]*=e[1],n[i+2]*=e[2];return t},convolute:function(t,e){for(var n=Math.round(Math.sqrt(e.length)),r=~~(n/2),o=t.data,l=t.width,c=t.height,h=l,f=c,y=0;y<f;y++)for(var v=0;v<h;v++){for(var d=y,m=v,w=4*(y*h+v),k=0,g=0,b=0,A=0;A<n;A++)for(var x=0;x<n;x++){var F=d+A-r,_=m+x-r;if(F>=0&&F<c&&_>=0&&_<l){var I=4*(F*l+_),C=e[A*n+x];k+=o[I]*C,g+=o[I+1]*C,b+=o[I+2]*C}}o[w]=k,o[w+1]=g,o[w+2]=b}return t}},f={normal:function(t){return t},clarendon:function(t){return t=h.brightness.apply(this,[t,.1]),t=h.contrast.apply(this,[t,.1]),t=h.saturation.apply(this,[t,.15])},gingham:function(t){return t=h.sepia.apply(this,[t,.04]),t=h.contrast.apply(this,[t,-.15])},moon:function(t){return t=h.grayscale.apply(this,[t,1]),t=h.contrast.apply(this,[t,-.04]),t=h.brightness.apply(this,[t,.1])},lark:function(t){return t=h.brightness.apply(this,[t,.08]),t=h.rgbAdjust.apply(this,[t,[1,1.03,1.05]]),t=h.saturation.apply(this,[t,.12])},reyes:function(t){return t=h.sepia.apply(this,[t,.4]),t=h.brightness.apply(this,[t,.13]),t=h.contrast.apply(this,[t,-.05])},juno:function(t){return t=h.rgbAdjust.apply(this,[t,[1.01,1.04,1]]),t=h.saturation.apply(this,[t,.3])},slumber:function(t){return t=h.brightness.apply(this,[t,.1]),t=h.saturation.apply(this,[t,-.5])},crema:function(t){return t=h.rgbAdjust.apply(this,[t,[1.04,1,1.02]]),t=h.saturation.apply(this,[t,-.05])},ludwig:function(t){return t=h.brightness.apply(this,[t,.05]),t=h.saturation.apply(this,[t,-.03])},aden:function(t){return t=h.colorFilter.apply(this,[t,[228,130,225,.13]]),t=h.saturation.apply(this,[t,-.2])},perpetua:function(t){return t=h.rgbAdjust.apply(this,[t,[1.05,1.1,1]])},amaro:function(t){return t=h.saturation.apply(this,[t,.3]),t=h.brightness.apply(this,[t,.15])},mayfair:function(t){return h.colorFilter.apply(this,[t,[230,115,108,.05]]),h.saturation.apply(this,[t,.15]),t},rise:function(t){return t=h.colorFilter.apply(this,[t,[255,170,0,.1]]),t=h.brightness.apply(this,[t,.09]),t=h.saturation.apply(this,[t,.1])},hudson:function(t){return t=h.rgbAdjust.apply(this,[t,[1,1,1.25]]),t=h.contrast.apply(this,[t,.1]),t=h.brightness.apply(this,[t,.15])},valencia:function(t){return t=h.colorFilter.apply(this,[t,[255,225,80,.08]]),t=h.saturation.apply(this,[t,.1]),t=h.contrast.apply(this,[t,.05])},xpro2:function(t){return t=h.colorFilter.apply(this,[t,[255,255,0,.07]]),t=h.saturation.apply(this,[t,.2]),t=h.contrast.apply(this,[t,.15])},sierra:function(t){return t=h.contrast.apply(this,[t,-.15]),t=h.saturation.apply(this,[t,.1])},willow:function(t){return t=h.grayscale.apply(this,[t,1]),t=h.colorFilter.apply(this,[t,[100,28,210,.03]]),t=h.brightness.apply(this,[t,.1])},lofi:function(t){return t=h.contrast.apply(this,[t,.15]),t=h.saturation.apply(this,[t,.2])},inkwell:function(t){return t=h.grayscale.apply(this,[t,1])},hefe:function(t){return t=h.contrast.apply(this,[t,.1]),t=h.saturation.apply(this,[t,.15])},nashville:function(t){return t=h.colorFilter.apply(this,[t,[220,115,188,.12]]),t=h.contrast.apply(this,[t,-.05])},stinson:function(t){return t=h.brightness.apply(this,[t,.1]),t=h.sepia.apply(this,[t,.3])},vesper:function(t){return t=h.colorFilter.apply(this,[t,[255,225,0,.05]]),t=h.brightness.apply(this,[t,.06]),t=h.contrast.apply(this,[t,.06])},earlybird:function(t){return t=h.colorFilter.apply(this,[t,[255,165,40,.2]])},brannan:function(t){return t=h.contrast.apply(this,[t,.2]),t=h.colorFilter.apply(this,[t,[140,10,185,.1]])},sutro:function(t){return t=h.brightness.apply(this,[t,-.1]),t=h.saturation.apply(this,[t,-.1])},toaster:function(t){return t=h.sepia.apply(this,[t,.1]),t=h.colorFilter.apply(this,[t,[255,145,0,.2]])},walden:function(t){return t=h.brightness.apply(this,[t,.1]),t=h.colorFilter.apply(this,[t,[255,255,0,.2]])},1977:function(t){return t=h.colorFilter.apply(this,[t,[255,25,0,.15]]),t=h.brightness.apply(this,[t,.1])},kelvin:function(t){return t=h.colorFilter.apply(this,[t,[255,140,0,.1]]),t=h.rgbAdjust.apply(this,[t,[1.15,1.05,1]]),t=h.saturation.apply(this,[t,.35])},maven:function(t){return t=h.colorFilter.apply(this,[t,[225,240,0,.1]]),t=h.saturation.apply(this,[t,.25]),t=h.contrast.apply(this,[t,.05])},ginza:function(t){return h.sepia.apply(this,[t,.06]),h.brightness.apply(this,[t,.1]),t},skyline:function(t){return t=h.saturation.apply(this,[t,.35]),t=h.brightness.apply(this,[t,.1])},dogpatch:function(t){return t=h.contrast.apply(this,[t,.15]),t=h.brightness.apply(this,[t,.1])},brooklyn:function(t){return t=h.colorFilter.apply(this,[t,[25,240,252,.05]]),t=h.sepia.apply(this,[t,.3])},helena:function(t){return t=h.colorFilter.apply(this,[t,[208,208,86,.2]]),t=h.contrast.apply(this,[t,.15])},ashby:function(t){return t=h.colorFilter.apply(this,[t,[255,160,25,.1]]),t=h.brightness.apply(this,[t,.1])},charmes:function(t){return t=h.colorFilter.apply(this,[t,[255,50,80,.12]]),t=h.contrast.apply(this,[t,.05])}},y=function(){function t(image,e){r(this,t),this.options=e||{format:"jpeg"},this.scale=this.options.scale?this.options.scale:1,this.w=300,this.h=300,this.vignette="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}return o(t,[{key:"importImage",value:function(image){return this.canvas=document.createElement("canvas"),this.w=this.canvas.width=image.naturalWidth*this.scale,this.h=this.canvas.height=image.naturalHeight*this.scale,this.ctx=this.canvas.getContext("2d"),this.ctx.drawImage(image,0,0,this.w,this.h),this}},{key:"applyFilter",value:function(t,e){var n,r=this;return new Promise((function(o){r.pixels=r.ctx.getImageData(0,0,r.w,r.h),o(n=h[t].apply(r,[r.pixels,e]))})).then(this.render(n)),this}},{key:"applyInstaFilter",value:function(t){var e,n=this;t=t.toLowerCase();var p=new Promise((function(r){n.ctx.getImageData(0,0,n.w,n.h),n.pixels=n.ctx.getImageData(0,0,n.w,n.h),r(e=f[t].apply(n,[n.pixels]))}));"mayfair"===t||"rise"===t||"hudson"===t||"xpro2"===t||"amaro"===t||"earlybird"===t||"sutro"===t||"toaster"==t||"brannan"===t?new Promise((function(t){p.then(n.render(e)),t()})).then(this.applyVignette()):p.then(this.render(e));return this}},{key:"overlayImage",value:function(t){var e=this,n=this.initImage();return n.onload=function(){e.ctx.drawImage(n,0,0,e.w,e.h)},n.src=t,this}},{key:"applyVignette",value:function(){this.overlayImage(this.vignette)}},{key:"render",value:function(t){this.ctx.putImageData(t,0,0)}},{key:"getBase64",value:function(){var t=this;return new Promise((function(e){e(t.canvas.toDataURL("image/"+t.options.format))}))}},{key:"initCanvas",value:function(t,e){var canvas=document.createElement("canvas");return canvas.width=t,canvas.height=e,canvas}},{key:"initImage",value:function(){return new Image}}]),t}();t.exports.Filterous=y,t.exports.importImage=function(t,e){return new y(t,e).importImage(t,e)}},2182:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},2183:function(t,e){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},2184:function(t,e,n){"use strict";n(1095)},2708:function(t,e,n){"use strict";n.r(e);var r=n(4),o=(n(35),n(251)),l=n(643),c=n(2181),h=n.n(c),f={name:"ImageFilter",data:function(){return{n:null,file:null,image:null,preview:"",loading:!1,filter:"normal",filterPreview:[],filterList:["normal","clarendon","gingham","moon","lark","reyes","juno","slumber","crema","ludwig","aden","perpetua","amaro","mayfair","rise","hudson","valencia","xpro2","sierra","willow","lofi","inkwell","hefe","nashville","stinson","vesper","earlybird","brannan","sutro","toaster","walden","1977","kelvin","maven","ginza","skyline","dogpatch","brooklyn","helena","ashby","charmes"]}},watch:{filter:function(t){this.preview&&this.handleFilter(t)}},mounted:function(){},methods:{handleChange:function(t){var e=this,n=t.target.files;if(!n.length)return!1;var o=n[0];this.file=o,this.loading=!0,this.filterPreview=[],Object(l.a)(o).then((function(t){e.preview=t,e.$nextTick((function(){e.$refs.image_filter_preview.onload=Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("ok"),n=0;case 2:if(!(n<e.filterList.length)){t.next=14;break}return r=e.filterList[n],t.t0=e.filterPreview,t.t1=r,t.next=8,e.handleFilter(r,!0);case 8:t.t2=t.sent,t.t3={filterName:t.t1,src:t.t2},t.t0.push.call(t.t0,t.t3);case 11:n++,t.next=2;break;case 14:case"end":return t.stop()}}),t)}))),e.$nextTick((function(){setTimeout((function(){e.loading=!1}),1e3)}))}))}))},handleFilter:function(filter,t){return h.a.importImage(this.$refs.image_filter_preview,{scale:t?200/this.$refs.image_filter_preview.naturalWidth:1,format:"png"}).applyInstaFilter(filter).getBase64()},download:function(t){this.handleFilter(t).then((function(e){Object(o.a)(e,"filter-".concat(t,".png"))}))}}},y=(n(2184),n(2)),v=function(t){t.exports.head={meta:[{hid:"keywords",keywords:"图片在线添加滤镜,Instagram 滤镜在线,Instagram滤镜,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"在线添加 Instagram 滤镜"}],title:"图片加滤镜 - MikuTools"},t.options.toolsMeta={name:"图片加滤镜",path:"/image_filter",head:{meta:[{hid:"keywords",keywords:"图片在线添加滤镜,Instagram 滤镜在线,Instagram滤镜,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"在线添加 Instagram 滤镜"}],title:"图片加滤镜 - MikuTools"},hot:"new",show:!0,key:"image"}},component=Object(y.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image_filter"},[n("nya-container",{attrs:{title:"图片加滤镜"}},[n("div",{staticClass:"nya-subtitle mt-0"},[t._v("\n            请选择要添加滤镜的图片\n        ")]),n("el-input",{attrs:{type:"file",accept:"image/*",disabled:t.loading,placeholder:t.n?t.n.replace(/C:\\fakepath\\/,""):"点击这里上传文件"},nativeOn:{change:function(e){return t.handleChange(e)}},model:{value:t.n,callback:function(e){t.n=e},expression:"n"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.filterPreview.length,expression:"filterPreview.length"}]},[n("div",{staticClass:"nya-subtitle mt-20"},[t._v("\n                滤镜列表\n            ")]),n("div",{staticClass:"filterList"},t._l(t.filterPreview,(function(e,r){return n("div",{key:r,staticClass:"filter-preview"},[n("el-tooltip",{attrs:{transition:"el-fade-in",effect:"dark",content:"点击下载："+e.filterName,placement:"bottom"}},[n("img",{attrs:{src:e.src,alt:e.filterName},on:{click:function(n){return t.download(e.filterName)}}})]),n("div",{staticClass:"filter-preview-title"},[t._v("\n                        "+t._s(e.filterName)+"\n                    ")])],1)})),0),n("div",{staticClass:"nya-subtitle mt-20"},[t._v("\n                预览\n            ")]),n("img",{ref:"image_filter_preview",staticClass:"preview",attrs:{src:t.preview,alt:"preview"}})]),t.loading&&!t.filterPreview.length?n("div",{staticClass:"image_filter-loading"},[n("nya-loading")],1):t._e()],1),n("nya-container",{attrs:{title:"说明"}},[n("ul",{staticClass:"nya-list"},[n("li",[t._v("如果滤镜加载失败或者无法正常使用，请更换现代浏览器，例如 "),n("b",[t._v("360极速浏览器 ")]),n("a",{attrs:{href:"http://browser.360.cn/ee/",target:"_blank",rel:"noopener noreferrer"}},[t._v("电脑")]),t._v(" 或 "),n("a",{attrs:{href:"https://www.coolapk.com/apk/com.qihoo.contents",target:"_blank",rel:"noopener noreferrer"}},[t._v("手机")])]),n("li",[t._v("对于苹果设备的兼容性可能不是很好")])])])],1)}),[],!1,null,null,null);"function"==typeof v&&v(component);e.default=component.exports},643:function(t,e,n){"use strict";n(8);e.a=function(t){return new Promise((function(e,n){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){return e(r.result)},r.onerror=function(t){return n(t)}}))}}}]);